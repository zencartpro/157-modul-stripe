Stripe Checkout 3.1.1 für Zen Cart 1.5.7j deutsch

Dieses Modul integriert Checkout via Stripe in Ihren Zen Cart Shop.
Stripe bietet neben Kreditkarten auch andere Zahlungsarten, dieses Modul wurde mit folgenden Stripe Zahlungsarten getestet:

Kreditkarten
Cartes Bancaires
Amazon Pay
Klarna
Google Pay
Apple Pay

Das Modul kann im Testmodus getestet werden.

Voraussetzungen:
- freigeschalteter Account bei Stripe (www.stripe.com)
- Zen Cart 1.5.7j deutsch


VORBEREITUNGEN BEI STRIPE

1)
Sie benötigen je 2 Schlüssel für Livesystem und Testsystem
Geben Sie in Ihrem Stripe Dashboard oben im Suchfeld Folgendes ein:
API
Clicken Sie auf das Suchergebnis Entwickler > API Schlüssel
Unter Standard Schlüssel werden Ihnen Veröffentlichbarer Schlüssel und Geheimschlüssel angezeigt
Kopieren Sie sich diese beiden Schlüssel in eine Textdatei
Sollten Sie noch keine Keys angelegt haben, können Sie hier welche erstellen
Die Keys für das Livesystem beginnen immer mit pk_live

2)
Für das Testsystem benötigen Sie ebenfalls 2 Schlüssel
Klicken Sie oben links in Ihrem Stripe Dashboard auf Ihren Kontonamen
Wählen Sie "Zu Sandbox wechseln" >>> Testmodus
Geben Sie nun im Suchfeld oben wieder Folgendes ein:
API
Clicken Sie auf das Suchergebnis Entwickler > API Schlüssel
Unter Standard Schlüssel werden Ihnen Veröffentlichbarer Schlüssel und Geheimschlüssel angezeigt
Kopieren Sie sich diese beiden Schlüssel in eine Textdatei
Sollten Sie noch keine Keys angelegt haben, können Sie hier welche erstellen
Die Keys für das Testsystem beginnen immer mit pk_test

3)
Aktivieren und konfigurieren Sie in Ihrem Stripe Dashboard nun die Zahlungsarten, die Sie anbieten wollen.
Dieses Modul enthält keine Webhook Funktionalität, daher ist es für asynchrone Zahlungsarten wie eps, Lastschrift, Multibanco NICHT geeignet.
Für dieses Modul geeignet und getestet sind: Kreditkarten, Cartes Bancaires, Amazon Pay, Klarna, Google Pay, Apple Pay
Sie können in Ihem Stripe Dashboard die aktiven Zahlungsarten auch auf bestimmte Länder einschränken, Kunden, die dann aus anderen Ländern im Shop surfen, werden solch eingeschränkte Zahlungsarteb dann nicht angeboten.


INSTALLATION

1)
Im Ordner NEUE DATEIEN den Ordner includes/templates/DEINTEMPLATE auf den Namen Ihres im Shop aktiven Templates umbenennen.
Dann den Inhalt des Ordners NEUE DATEIEN in der vorgegebenen Struktur in Ihr Shopverzeichnis hochladen, dabei werden keine bestehenden Dateien überschrieben.

2)
Im Ordner GEAENDERTE DATEIEN finden Sie die einzige Datei, die von diesem Modul geändert werden muss:
includes/modules/pages/checkout_confirmation/header_php.php
Vergleichen Sie diese Datei mit BeyondCompare oder WinMerge mit der in Ihrem Shop und ändern Sie die Datei im Shop entsprechend ab.

Original (ca. Zeile 57):

if (DISPLAY_CONDITIONS_ON_CHECKOUT == 'true') {
  if (!isset($_POST['conditions']) || ($_POST['conditions'] != '1')) {
    $messageStack->add_session('checkout_payment', ERROR_CONDITIONS_NOT_ACCEPTED, 'error');
  }
}


Ändern auf:

// bof stripe
if (DISPLAY_CONDITIONS_ON_CHECKOUT == 'true') {
if (!isset($_POST['conditions']) || ($_POST['conditions'] != '1')) {		
if (!empty($_SESSION['paymentIntent'])){ 
//do nothing
} else {
$messageStack->add_session('checkout_payment', ERROR_CONDITIONS_NOT_ACCEPTED, 'error');
}
}
}


3)
Unter Module > Zahlungsarten das Stripe Modul installieren und konfigurieren, alle Einstellungsmöglichkeiten sind dort erklärt.



ABLAUF IM FRONTEND

Die Eingabe der Kreditkartendaten oder Auswahl anderer Stripe Zahlungsarten erfolgt nach der Auswahl der Zahlungsart Stripe Checkout im letzten Bestellschritt. 
Über dem Button Kaufen werden die entsprechenden Eingabefelder angezeigt.
Wenn Sie das Modul im Testmodus testen, erscheint ein entsprechender Hinweis im Shop.

Farben/Schriftgrößen für die Eingabefelder können Sie in folgendem Stylesheet auf Ihr Layout feinabstimmen:
includes/templates/DEINTEMPLATE/css/stylesheet_stripe.css

Um Kreditkarten im Testmodus zu testen, verwenden Sie folgende Kreditkartennummer:
4242 4242 4242 4242
Ablaufdatum: irgendeins in der Zukunft
CVV Code: irgendwas, z.B. 123

Bei der Auswahl der Zahlungsart Stripe Checkout erscheint folgender Infotext:
Bezahlen Sie mit Kreditkarte, Amazon Pay, Klarna, Apple Pay oder Google Pay. Die Eingabe der Zahlungsdaten erfolgt im nächsten Schritt.

Diesen Text können Sie anpassen in:
includes/languages/german/modules/payment/stripe.php
define('MODULE_PAYMENT_STRIPE_TEXT_DESCRIPTION_CHECKOUT_PAYMENT', 'Bezahlen Sie mit <b>Kreditkarte</b>, <b>Amazon Pay</b>, <b>Klarna</b>, <b>Apple Pay</b> oder <b>Google Pay</b>. Die Eingabe der Zahlungsdaten erfolgt im nächsten Schritt.');
Falls Sie im Shop auch englisch aktiv haben entsprechend in:
includes/languages/english/modules/payment/stripe.php

Wenn Sie Ihren Shop neben deutsch auch in englisch betreiben, bekommen Kunden, die auf englisch bestellen auch die Transaktionsbestätigung von Stripe auf englisch.
Kunden, die auf deutsch bestellen, bekommen das Mail von Stripe auf deutsch.
Sollten Sie im Shop noch weitere Sprachen aktiv haben, dann ergänzen Sie die Sprachen in:

includes/modules/payment/stripepay/create.php
ca. Zeile 52

Original werden nur deutsch und englisch unterstützt:
if ($_SESSION['language']=='english') {
$locales = 'en';
} else {
$locales = 'de';
}

Wenn Sie z.B. auch französisch und italieneisch aktiv haben, dann ändern Sie den Abschnitt entsprechend ab auf z.B.

if ($_SESSION['language']=='english') {
$locales = 'en';
}
if ($_SESSION['language']=='french') {
$locales = 'fr';
}
if ($_SESSION['language']=='italian') {
$locales = 'it';
}
if ($_SESSION['language']=='german') {
$locales = 'de';
}

WICHTIG: 
Falls Sie den API-Schlüssel oder den Testmodusstatus dieses Zahlungsmoduls geändert haben, müssen Sie alle vorhandenen Datensätze in der Datenbanktabelle stripe löschen.
Gehen Sie dazu in der Shopadministration auf Tools > SQL-Patches installieren.
Geben Sie Folgendes in das Textfeld ein und klicken Sie dann auf die Schaltfläche Absenden:

TRUNCATE stripe;



CREDITS/LIZENZ

Dieses Modul ist eine Anpassung des Moduls Stripe Pay pament module von lat9 für die deutsche Zen Cart Version 1.5.7j
Grundlage war das entsprechende Github Repository:
https://github.com/lat9/stripe
Lizenz: GPL-3.0


CHANGELOG:

Version 3.1.1
30.01.2026
Parameter preferred_locales wird je nach gewählter Sprache übergeben
Unterstützung für multilinguale Stripe Transaktionsbestätigungsemails

Version 3.1.0
28.01.2026
Unterstützung für weitere Stripe Zahlungsarten hinzugefügt
Stripe php-library auf 19.2.0 aktualisiert

Version 3.0.0
20.11.2025
Initial Release

